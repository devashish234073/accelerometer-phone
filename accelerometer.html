<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    table {
      border-collapse: collapse;
      margin-left: auto;
      margin-right: auto;
      box-shadow: 0px 0px 70px lightgreen;
    }

    table td {
      border: 1px solid black;
    }

    #out {
      background-color: black;
      color: yellow;
    }
  </style>
</head>

<body>
  <table>
    <tr>
      <td>X</td>
      <td>
        <p id="x"></p>
      </td>
    </tr>
    <tr>
      <td>Y</td>
      <td>
        <p id="y"></p>
      </td>
    </tr>
    <tr>
      <td>Z</td>
      <td>
        <p id="z"></p>
      </td>
    </tr>
  </table>
  <p id="out"></p>
  <button id="trigger" onclick="toggleSaveData()">Start Sending Data</button>
  <script>
    function _(selector) {
      return document.querySelector(selector);
    }
    var x = _("#x");
    var y = _("#y");
    var z = _("#z");
    var trigger = _("#trigger");
    if (window.DeviceMotionEvent == undefined) {
      alert("no accelerometer");
    } else {
      window.addEventListener("devicemotion", accelerometerUpdate, true);
    }
    function accelerometerUpdate() {
      var acc = event.accelerationIncludingGravity;
      var aX = acc.x;
      var aY = acc.y;
      var aZ = acc.z;
      x.innerText = aX.toFixed(2);
      y.innerText = aY.toFixed(2);
      z.innerText = aZ.toFixed(2);
    }

    var tmr = null;
    function toggleSaveData() {
      if (tmr == null) {
        tmr = setInterval(function () {
          saveData("data?x=" + x.innerText + "&y=" + y.innerText + "&z=" + z.innerText);
          //saveData("data?x=" + 12 + "&y=" + 23 + "&z=" + 34);
        }, 500);
        trigger.innerText = "Stop Sending Data";
      } else {
        clearInterval(tmr);
        trigger.innerText = "Start Sending Data";
      }
    }
    var out = _("#out");
    function saveData(url) {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
          out.innerText = xhttp.responseText;
        }
      };
      xhttp.open("GET", url, true);
      xhttp.send();
    }
  </script>
</body>

</html>